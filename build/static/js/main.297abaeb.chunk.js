(this["webpackJsonpreact-ros-robot"]=this["webpackJsonpreact-ros-robot"]||[]).push([[0],{49:function(e,t,n){},50:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var o=n(1),c=n.n(o),s=n(25),i=n.n(s),a=(n(49),n(50),n(0)),r=n(4),l=n(3),O=n(2),j=n(66),h=n(70),b=n(69),d=n(6),u=function(e){Object(l.a)(n,e);var t=Object(O.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return Object(d.jsx)(j.a,{children:Object(d.jsxs)(h.a,{bg:"dark",variant:"dark",expand:"lg",collapseOnSelect:!0,children:[Object(d.jsx)(h.a.Brand,{href:"/",children:" "}),Object(d.jsx)(h.a.Brand,{href:"/",children:" Agricultare Robot"}),Object(d.jsx)(h.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(d.jsx)(h.a.Collapse,{id:"basic-navbar-nav",children:Object(d.jsxs)(b.a,{className:"mr-auto",children:[Object(d.jsx)(b.a.Link,{href:"/",children:" Home "}),Object(d.jsx)(b.a.Link,{href:"/About",children:" About "})]})})]})})}}]),n}(o.Component),R=function(e){Object(l.a)(n,e);var t=Object(O.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return Object(d.jsx)(j.a,{className:"text-center",children:Object(d.jsx)("p",{children:" Tarek \xa9 2021"})})}}]),n}(o.Component),_=n(42),E=n(11),S=n(44),x={ROSBRIDGE_SERVER_IP:"192.168.1.10",ROSBRIDGE_SERVER_PORT:"9090",RECONNECTION_TIMER:3e3,PUB_CMD_VEL_TOPIC:"/cmd_vel",PUB_CMD_VEL_MESSAGE:"geometry_msgs/Twist",SUB_CMD_POSE_TOPIC:"/amcl_pose",SUB_CMD_POSE_MESSAGE:"geometry_msgs/PoseWithCovarianceStamped",SUB_CMD_ODOM_TOPIC:"/odom",SUB_CMD_ODOM_MESSAGE:"nav_msgs/Odometry"},p=function(e){Object(l.a)(n,e);var t=Object(O.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.call(this)).state={connected:!1,ros:null},e.init_connection(),e}return Object(r.a)(n,[{key:"init_connection",value:function(){var e=this;this.state.ros=new window.ROSLIB.Ros,console.log(this.state.ros),this.state.ros.on("connection",(function(){console.log("connection established!"),e.setState({connected:!0})})),this.state.ros.on("close",(function(){console.log("connection is closed"),e.setState({connected:!1}),setTimeout((function(){try{e.state.ros.connect("ws://"+x.ROSBRIDGE_SERVER_IP+":"+x.ROSBRIDGE_SERVER_PORT)}catch(t){console.log("connection problem")}}),x.RECONNECTION_TIMER)}));try{this.state.ros.connect("ws://"+x.ROSBRIDGE_SERVER_IP+":"+x.ROSBRIDGE_SERVER_PORT)}catch(t){console.log("connection problem")}}},{key:"render",value:function(){return Object(d.jsx)("div",{children:Object(d.jsx)(S.a,{className:"text-center mt-3",variant:this.state.connected?"success":"danger",children:this.state.connected?"Robot Connected":"Robot Disconnected"})})}}]),n}(o.Component),v=n(12),m=n(41),f=n(67),w=n(68),g=function(e){Object(l.a)(n,e);var t=Object(O.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.call(this)).state={ros:null},e.init_connection(),e.handleMove=e.handleMove.bind(Object(v.a)(e)),e.handleStop=e.handleStop.bind(Object(v.a)(e)),e}return Object(r.a)(n,[{key:"init_connection",value:function(){var e=this;this.state.ros=new window.ROSLIB.Ros,console.log(this.state.ros),this.state.ros.on("connection",(function(){console.log("connection established in Teleoperation Component!"),console.log(e.state.ros),e.setState({connected:!0})})),this.state.ros.on("close",(function(){console.log("connection is closed"),e.setState({connected:!1}),setTimeout((function(){try{e.state.ros.connect("ws://"+x.ROSBRIDGE_SERVER_IP+":"+x.ROSBRIDGE_SERVER_PORT)}catch(t){console.log("connection problem")}}),x.RECONNECTION_TIMER)}));try{this.state.ros.connect("ws://"+x.ROSBRIDGE_SERVER_IP+":"+x.ROSBRIDGE_SERVER_PORT)}catch(t){console.log("connection problem")}}},{key:"handleMove",value:function(e){console.log("Handle Move");var t=new window.ROSLIB.Topic({ros:this.state.ros,name:x.PUB_CMD_VEL_TOPIC,messageType:x.PUB_CMD_VEL_MESSAGE}),n=new window.ROSLIB.Message({linear:{x:e.y/50,y:0,z:0},angular:{x:0,y:0,z:-e.x/50}});t.publish(n)}},{key:"handleStop",value:function(e){console.log("Handle Stop");var t=new window.ROSLIB.Topic({ros:this.state.ros,name:x.PUB_CMD_VEL_TOPIC,messageType:x.PUB_CMD_VEL_MESSAGE}),n=new window.ROSLIB.Message({linear:{x:0,y:0,z:0},angular:{x:0,y:0,z:0}});t.publish(n)}},{key:"render",value:function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)(f.a,{children:Object(d.jsx)(w.a,{children:Object(d.jsx)("h2",{className:"mt-4"})})}),Object(d.jsx)(f.a,{children:Object(d.jsx)(w.a,{children:Object(d.jsx)(m.Joystick,{size:100,baseColor:"#EEEEEE",stickColor:"#000000",move:this.handleMove,stop:this.handleStop})})})]})}}]),n}(o.Component),y=n(37),I=function(e){Object(l.a)(n,e);var t=Object(O.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.call(this)).state={ros:null,x:0,y:0,Orientation:0,Linear_velocity:0,Angular_velocity:0},e.init_connection(),e}return Object(r.a)(n,[{key:"init_connection",value:function(){var e=this;this.state.ros=new window.ROSLIB.Ros,console.log(this.state.ros),this.state.ros.on("connection",(function(){console.log("connection established in RobotState Component!"),console.log(e.state.ros),e.setState({connected:!0})})),this.state.ros.on("close",(function(){console.log("connection is closed"),e.setState({connected:!1}),setTimeout((function(){try{e.state.ros.connect("ws://"+x.ROSBRIDGE_SERVER_IP+":"+x.ROSBRIDGE_SERVER_PORT)}catch(t){console.log("connection problem")}}),x.RECONNECTION_TIMER)}));try{this.state.ros.connect("ws://"+x.ROSBRIDGE_SERVER_IP+":"+x.ROSBRIDGE_SERVER_PORT)}catch(t){console.log("connection problem")}}},{key:"componentDidMount",value:function(){this.getRobotState()}},{key:"getRobotState",value:function(){var e=this;new window.ROSLIB.Topic({ros:this.state.ros,name:x.SUB_CMD_POSE_TOPIC,messageType:x.SUB_CMD_POSE_MESSAGE}).subscribe((function(t){e.setState({x:t.pose.pose.position.x.toFixed(2)}),e.setState({y:t.pose.pose.position.y.toFixed(2)}),e.setState({Orientation:e.getOrientationFromQuaternion(t.pose.pose.orientation).toFixed(2)})})),new window.ROSLIB.Topic({ros:this.state.ros,name:x.SUB_CMD_ODOM_TOPIC,messageType:x.SUB_CMD_ODOM_MESSAGE}).subscribe((function(t){e.setState({Linear_velocity:t.twist.twist.linear.x.toFixed(2)}),e.setState({Angular_velocity:t.twist.twist.angular.z.toFixed(2)})}))}},{key:"getOrientationFromQuaternion",value:function(e){var t=new y.b(e.x,e.y,e.z,e.w);return(new y.a).setFromQuaternion(t)._z*(180/Math.PI)}},{key:"render",value:function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)(f.a,{children:Object(d.jsxs)(w.a,{children:[Object(d.jsx)("h4",{className:"mt-5",children:"Position"}),Object(d.jsxs)("p",{className:"mt-0",children:["x: ",this.state.x]}),Object(d.jsxs)("p",{className:"mt-0",children:["y: ",this.state.y]}),Object(d.jsxs)("p",{className:"mt-0",children:["Orientation: ",this.state.Orientation]})]})}),Object(d.jsx)(f.a,{children:Object(d.jsxs)(w.a,{children:[Object(d.jsx)("h4",{className:"mt-4",children:"Velocities"}),Object(d.jsxs)("p",{className:"mt-0",children:["Linear Velocity: ",this.state.Linear_velocity]}),Object(d.jsxs)("p",{className:"mt-0",children:["Angular Velocity: ",this.state.Angular_velocity]})]})})]})}}]),n}(o.Component),C=function(e){Object(l.a)(n,e);var t=Object(O.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.call(this)).state={ros:null},e.view_map=e.view_map.bind(Object(v.a)(e)),e}return Object(r.a)(n,[{key:"init_connection",value:function(){var e=this;this.state.ros=new window.ROSLIB.Ros,console.log(this.state.ros),this.state.ros.on("connection",(function(){console.log("connection established in RobotState Component!"),console.log(e.state.ros),e.setState({connected:!0})})),this.state.ros.on("close",(function(){console.log("connection is closed"),e.setState({connected:!1}),setTimeout((function(){try{e.state.ros.connect("ws://"+x.ROSBRIDGE_SERVER_IP+":"+x.ROSBRIDGE_SERVER_PORT)}catch(t){console.log("connection problem")}}),x.RECONNECTION_TIMER)}));try{this.state.ros.connect("ws://"+x.ROSBRIDGE_SERVER_IP+":"+x.ROSBRIDGE_SERVER_PORT)}catch(t){console.log("connection problem")}}},{key:"componentDidMount",value:function(){this.init_connection(),this.view_map()}},{key:"view_map",value:function(){var e=new window.ROS2D.Viewer({divID:"nav_div",width:640,height:480});new window.NAV2D.OccupancyGridClientNav({ros:this.state.ros,rootObject:e.scene,viewer:e,serverName:"/move_base",withOrientation:!0})}},{key:"render",value:function(){return Object(d.jsx)("div",{children:Object(d.jsx)("div",{id:"nav_div",children:"Viewer"})})}}]),n}(o.Component),B=function(e){Object(l.a)(n,e);var t=Object(O.a)(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={},e}return Object(r.a)(n,[{key:"render",value:function(){return Object(d.jsx)("div",{children:Object(d.jsxs)(j.a,{children:[Object(d.jsx)("h1",{className:"text-center mt-3",children:"Robot Control Page"}),Object(d.jsx)(f.a,{children:Object(d.jsx)(w.a,{children:Object(d.jsx)(p,{})})}),Object(d.jsxs)(f.a,{children:[Object(d.jsx)(w.a,{children:Object(d.jsx)("h2",{children:"Teleoperation "})}),Object(d.jsx)(w.a,{children:Object(d.jsx)("h2",{children:"Map"})})]}),Object(d.jsxs)(f.a,{children:[Object(d.jsxs)(w.a,{children:[Object(d.jsx)(g,{}),Object(d.jsx)(I,{})]}),Object(d.jsx)(w.a,{children:Object(d.jsx)(C,{})})]}),Object(d.jsx)(f.a,{children:Object(d.jsx)(w.a,{})})]})})}}]),n}(o.Component),T=function(e){Object(l.a)(n,e);var t=Object(O.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return Object(d.jsx)("main",{children:Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{className:"text-center mt-3",children:"About"}),Object(d.jsx)("p",{className:"text-center mt-4",children:"This is an application for control Agri Robot through web Interface"})]})})}}]),n}(o.Component),D=function(e){Object(l.a)(n,e);var t=Object(O.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return Object(d.jsx)(j.a,{children:Object(d.jsx)(_.a,{children:Object(d.jsxs)(E.c,{children:[Object(d.jsx)(E.a,{path:"/",exact:!0,component:B}),Object(d.jsx)(E.a,{path:"/About",exact:!0,component:T})]})})})}}]),n}(o.Component);var M=function(){return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(u,{}),Object(d.jsx)(D,{children:" "}),Object(d.jsx)(R,{})]})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,71)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),o(e),c(e),s(e),i(e)}))};i.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(M,{})}),document.getElementById("root")),P()}},[[64,1,2]]]);
//# sourceMappingURL=main.297abaeb.chunk.js.map